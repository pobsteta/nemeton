% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/normalization.R
\name{create_composite_index}
\alias{create_composite_index}
\title{Create composite index from multiple indicators}
\usage{
create_composite_index(
  data,
  indicators,
  weights = NULL,
  name = "composite_index",
  aggregation = c("weighted_mean", "geometric_mean", "min", "max"),
  na.rm = TRUE,
  scale_to_100 = NULL
)
}
\arguments{
\item{data}{An \code{sf} object or data.frame with normalized indicators}

\item{indicators}{Character vector of indicator column names to include}

\item{weights}{Numeric vector of weights for each indicator (same length as indicators).
If NULL, equal weights are used. Weights are automatically normalized to sum to 1.}

\item{name}{Character. Name for the composite index column. Default "composite_index".}

\item{aggregation}{Character. Aggregation method. Options:
\itemize{
  \item "weighted_mean" - Weighted arithmetic mean (default)
  \item "geometric_mean" - Weighted geometric mean (good for multiplicative effects)
  \item "min" - Minimum value (conservative, limiting factor approach)
  \item "max" - Maximum value (optimistic)
}}

\item{na.rm}{Logical. Remove NA values in aggregation? Default TRUE.}

\item{scale_to_100}{Logical. Scale result to 0-100? Default TRUE for weighted_mean, FALSE otherwise.}
}
\value{
The input data with an added composite index column
}
\description{
Aggregates normalized indicators into a single composite score.
}
\details{
The composite index combines multiple normalized indicators into a single score.

\strong{Aggregation methods:}
\itemize{
  \item \strong{Weighted mean}: Standard linear combination, assumes indicators contribute additively
  \item \strong{Geometric mean}: Better for indicators with multiplicative relationships
  \item \strong{Min}: Conservative approach, final score limited by weakest indicator
  \item \strong{Max}: Optimistic approach, final score driven by strongest indicator
}

\strong{Weights} are normalized internally to sum to 1. For example:
\code{weights = c(2, 1, 1)} becomes \code{c(0.5, 0.25, 0.25)}
}
\examples{
\dontrun{
# Equal weights
results <- create_composite_index(
  normalized_data,
  indicators = c("carbon_norm", "biodiversity_norm", "water_norm")
)

# Custom weights (carbon 50\\%, biodiversity 30\\\%, water 20\\\%)
results <- create_composite_index(
  normalized_data,
  indicators = c("carbon_norm", "biodiversity_norm", "water_norm"),
  weights = c(0.5, 0.3, 0.2),
  name = "ecosystem_health"
)

# Geometric mean for multiplicative effects
results <- create_composite_index(
  normalized_data,
  indicators = c("carbon_norm", "water_norm"),
  aggregation = "geometric_mean"
)

# Limiting factor approach
results <- create_composite_index(
  normalized_data,
  indicators = c("carbon_norm", "biodiversity_norm"),
  aggregation = "min",
  name = "conservation_potential"
)
}

}
\seealso{
\code{\link{normalize_indicators}}
}
