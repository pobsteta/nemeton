<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Biodiversité, Résilience &amp; Services Climatiques (v0.3.0) • nemeton</title>
<script src="../deps/jquery-3.6.1/jquery-3.6.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Biodiversité, Résilience &amp; Services Climatiques (v0.3.0)">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nemeton</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started_fr.html">Démarrage rapide</a></li>
    <li><a class="dropdown-item" href="../articles/indicator-families_fr.html">Familles d'indicateurs (12 familles + radar)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/biodiversity-resilience-v030_fr.html">✨ NOUVEAU v0.3.0: Biodiversité, Risques, Climat</a></li>
    <li><a class="dropdown-item" href="../articles/temporal-analysis_fr.html">Analyse temporelle</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/internationalization.html">Internationalisation (i18n)</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pascalobstetar/nemeton/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Biodiversité, Résilience &amp; Services Climatiques (v0.3.0)</h1>
                        <h4 data-toc-skip class="author">Pascal
Obstétar</h4>
            
            <h4 data-toc-skip class="date">2026-01-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pascalobstetar/nemeton/blob/HEAD/vignettes/biodiversity-resilience-v030_fr.Rmd" class="external-link"><code>vignettes/biodiversity-resilience-v030_fr.Rmd</code></a></small>
      <div class="d-none name"><code>biodiversity-resilience-v030_fr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>La version 0.3.0 de <code>nemeton</code> étend le référentiel
d’indicateurs avec <strong>4 nouvelles familles</strong> couvrant la
biodiversité, la résilience aux risques, les dynamiques temporelles et
les services climatiques. Cette vignette démontre l’utilisation des
<strong>10 nouveaux indicateurs</strong> (B1-B3, R1-R3, T1-T2, A1-A2) et
leur intégration dans des workflows multi-familles.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pascalobstetar/nemeton" class="external-link">nemeton</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="données-de-démonstration">Données de démonstration<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-de-d%C3%A9monstration"></a>
</h2>
<p>Nous utilisons les données <code>massif_demo_units</code> avec
quelques attributs synthétiques pour illustrer les nouveaux
indicateurs.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Charger les données de démonstration</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">massif_demo_units</span><span class="op">)</span></span>
<span><span class="va">units</span> <span class="op">&lt;-</span> <span class="va">massif_demo_units</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Ajouter des attributs synthétiques pour les exemples</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">units</span><span class="op">$</span><span class="va">strata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Emergent"</span>, <span class="st">"Dominant"</span>, <span class="st">"Intermediate"</span>, <span class="st">"Suppressed"</span><span class="op">)</span>,</span>
<span>                       <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">units</span><span class="op">$</span><span class="va">age_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Young"</span>, <span class="st">"Intermediate"</span>, <span class="st">"Mature"</span>, <span class="st">"Old"</span>, <span class="st">"Ancient"</span><span class="op">)</span>,</span>
<span>                          <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">units</span><span class="op">$</span><span class="va">species</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Quercus"</span>, <span class="st">"Fagus"</span>, <span class="st">"Pinus"</span>, <span class="st">"Abies"</span><span class="op">)</span>, <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">units</span><span class="op">$</span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">80</span>, <span class="fl">120</span>, <span class="fl">150</span>, <span class="fl">200</span><span class="op">)</span>, <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">units</span><span class="op">$</span><span class="va">height</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">units</span><span class="op">$</span><span class="va">density</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0.6</span>, <span class="fl">0.95</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Créer des zones protégées synthétiques</span></span>
<span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">units</span><span class="op">)</span></span>
<span><span class="va">zone1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">units</span><span class="op">[</span><span class="fl">2</span>, <span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fl">250</span><span class="op">)</span></span>
<span><span class="va">zone2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">units</span><span class="op">[</span><span class="fl">7</span>, <span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fl">400</span><span class="op">)</span></span>
<span></span>
<span><span class="va">protected_areas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span></span>
<span>  zone_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ZNIEFF_001"</span>, <span class="st">"N2000_042"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ZNIEFF"</span>, <span class="st">"Natura2000"</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">zone1</span>, <span class="va">zone2</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">units</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Créer un corridor écologique synthétique</span></span>
<span><span class="va">corridor_geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="st">"xmin"</span><span class="op">]</span>, <span class="va">bbox</span><span class="op">[</span><span class="st">"xmax"</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="st">"ymin"</span><span class="op">]</span>, <span class="va">bbox</span><span class="op">[</span><span class="st">"ymax"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="st">"ymin"</span><span class="op">]</span>, <span class="va">bbox</span><span class="op">[</span><span class="st">"ymax"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">corridor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span></span>
<span>  corridor_id <span class="op">=</span> <span class="st">"TVB_001"</span>,</span>
<span>  geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="va">corridor_geom</span>, crs <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">units</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="famille-b-biodiversité">Famille B : Biodiversité<a class="anchor" aria-label="anchor" href="#famille-b-biodiversit%C3%A9"></a>
</h2>
<div class="section level3">
<h3 id="b1-protection-réglementaire">B1 : Protection réglementaire<a class="anchor" aria-label="anchor" href="#b1-protection-r%C3%A9glementaire"></a>
</h3>
<p>L’indicateur <strong>B1</strong> calcule le pourcentage de surface en
zones de protection.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/indicator_biodiversity_protection.html">indicator_biodiversity_protection</a></span><span class="op">(</span></span>
<span>  <span class="va">units</span>,</span>
<span>  protected_areas <span class="op">=</span> <span class="va">protected_areas</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"local"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">B1</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    0.00    0.00    0.00   22.46   18.43  100.00</span></span></code></pre></div>
<p><strong>Interprétation</strong> : Les parcelles avec B1 &gt; 50%
bénéficient d’une protection significative.</p>
</div>
<div class="section level3">
<h3 id="b2-diversité-structurelle">B2 : Diversité structurelle<a class="anchor" aria-label="anchor" href="#b2-diversit%C3%A9-structurelle"></a>
</h3>
<p>L’indicateur <strong>B2</strong> mesure la diversité de Shannon à
travers les strates, âges et essences.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/indicator_biodiversity_structure.html">indicator_biodiversity_structure</a></span><span class="op">(</span></span>
<span>  <span class="va">result</span>,</span>
<span>  strata_field <span class="op">=</span> <span class="st">"strata"</span>,</span>
<span>  age_class_field <span class="op">=</span> <span class="st">"age_class"</span>,</span>
<span>  species_field <span class="op">=</span> <span class="st">"species"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"shannon"</span>,</span>
<span>  weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>strata <span class="op">=</span> <span class="fl">0.4</span>, age <span class="op">=</span> <span class="fl">0.3</span>, species <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">B2</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    84.0    85.0    85.5    85.5    86.0    87.0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="b3-connectivité-écologique">B3 : Connectivité écologique<a class="anchor" aria-label="anchor" href="#b3-connectivit%C3%A9-%C3%A9cologique"></a>
</h3>
<p>L’indicateur <strong>B3</strong> évalue la proximité aux corridors
écologiques.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/indicator_biodiversity_connectivity.html">indicator_biodiversity_connectivity</a></span><span class="op">(</span></span>
<span>  <span class="va">result</span>,</span>
<span>  corridors <span class="op">=</span> <span class="va">corridor</span>,</span>
<span>  distance_method <span class="op">=</span> <span class="st">"edge"</span>,</span>
<span>  max_distance <span class="op">=</span> <span class="fl">3000</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">B3</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   721.7  1323.4  1566.1  1559.2  1927.8  2242.6</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="famille-r-risques-résilience">Famille R : Risques &amp; Résilience<a class="anchor" aria-label="anchor" href="#famille-r-risques-r%C3%A9silience"></a>
</h2>
<div class="section level3">
<h3 id="r1-r2-r3-risques-combinés">R1, R2, R3 : Risques combinés<a class="anchor" aria-label="anchor" href="#r1-r2-r3-risques-combin%C3%A9s"></a>
</h3>
<p>Les indicateurs de risque évaluent les vulnérabilités aux
perturbations. <em>Note: Dans cette vignette, nous simulons les valeurs.
Pour un usage réel, utilisez les fonctions
<code><a href="../reference/indicator_risk_fire.html">indicator_risk_fire()</a></code>, <code><a href="../reference/indicator_risk_storm.html">indicator_risk_storm()</a></code>
et <code><a href="../reference/indicator_risk_drought.html">indicator_risk_drought()</a></code> avec des données DEM et
climatiques.</em></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulation des indicateurs de risque</span></span>
<span><span class="co"># (Dans un cas réel, utiliser les fonctions avec DEM et données climatiques)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">43</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">R1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">40</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Risque incendie</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">R2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">45</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">25</span>, <span class="fl">35</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Vulnérabilité tempête</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">R3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">35</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">15</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Stress hydrique</span></span>
<span></span>
<span><span class="co"># Les pins en pente ont plus de risque incendie</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">R1</span><span class="op">[</span><span class="va">result</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Pinus"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">R1</span><span class="op">[</span><span class="va">result</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Pinus"</span><span class="op">]</span> <span class="op">*</span> <span class="fl">1.3</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">R1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fl">100</span>, <span class="va">result</span><span class="op">$</span><span class="va">R1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Les peuplements hauts/denses ont plus de risque tempête</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">R2</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">R2</span> <span class="op">*</span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">height</span> <span class="op">/</span> <span class="fl">22</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">density</span> <span class="op">/</span> <span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">R2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fl">100</span>, <span class="va">result</span><span class="op">$</span><span class="va">R2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R1"</span>, <span class="st">"R2"</span>, <span class="st">"R3"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;        R1              R2              R3                 geometry </span></span>
<span><span class="co">#&gt;  Min.   :29.15   Min.   :19.16   Min.   :20.55   POLYGON      :10  </span></span>
<span><span class="co">#&gt;  1st Qu.:37.82   1st Qu.:28.72   1st Qu.:31.86   epsg:2154    : 0  </span></span>
<span><span class="co">#&gt;  Median :46.24   Median :30.68   Median :47.03   +proj=lcc ...: 0  </span></span>
<span><span class="co">#&gt;  Mean   :48.88   Mean   :38.88   Mean   :48.04                     </span></span>
<span><span class="co">#&gt;  3rd Qu.:54.94   3rd Qu.:47.93   3rd Qu.:65.54                     </span></span>
<span><span class="co">#&gt;  Max.   :82.70   Max.   :71.67   Max.   :73.04</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="famille-t-dynamique-temporelle">Famille T : Dynamique Temporelle<a class="anchor" aria-label="anchor" href="#famille-t-dynamique-temporelle"></a>
</h2>
<div class="section level3">
<h3 id="t1-ancienneté">T1 : Ancienneté<a class="anchor" aria-label="anchor" href="#t1-anciennet%C3%A9"></a>
</h3>
<p>L’indicateur <strong>T1</strong> mesure l’âge des peuplements.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Utiliser les âges déjà définis</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">T1</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">age</span>  <span class="co"># Directement l'âge en années</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">T1</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    45.0    80.0   100.0   113.5   150.0   200.0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="t2-changements-doccupation">T2 : Changements d’occupation<a class="anchor" aria-label="anchor" href="#t2-changements-doccupation"></a>
</h3>
<p>L’indicateur <strong>T2</strong> détecte les transformations.
<em>Note: Utiliser <code><a href="../reference/indicator_temporal_change.html">indicator_temporal_change()</a></code> avec des
rasters Corine Land Cover multi-dates pour un usage réel.</em></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulation de taux de changement (%/an)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">44</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">T2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">25</span><span class="op">)</span></span>
<span><span class="co"># Les forêts anciennes sont plus stables</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">T2</span><span class="op">[</span><span class="va">result</span><span class="op">$</span><span class="va">T1</span> <span class="op">&gt;</span> <span class="fl">150</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">T2</span><span class="op">[</span><span class="va">result</span><span class="op">$</span><span class="va">T1</span> <span class="op">&gt;</span> <span class="fl">150</span><span class="op">]</span> <span class="op">*</span> <span class="fl">0.3</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">T2</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;  0.8048  1.9630  9.1258  8.1851 12.3251 18.5854</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="famille-a-air-microclimat">Famille A : Air &amp; Microclimat<a class="anchor" aria-label="anchor" href="#famille-a-air-microclimat"></a>
</h2>
<div class="section level3">
<h3 id="a1-couverture-arborée">A1 : Couverture arborée<a class="anchor" aria-label="anchor" href="#a1-couverture-arbor%C3%A9e"></a>
</h3>
<p>L’indicateur <strong>A1</strong> mesure le % de couverture arborée
dans un buffer de 1km. <em>Note: Utiliser
<code><a href="../reference/indicator_air_coverage.html">indicator_air_coverage()</a></code> avec un raster de végétation pour
un usage réel.</em></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulation de couverture dans buffer 1km</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">45</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">A1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">40</span>, <span class="fl">95</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">A1</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   40.29   52.71   56.92   57.56   60.45   74.84</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="a2-qualité-de-lair">A2 : Qualité de l’air<a class="anchor" aria-label="anchor" href="#a2-qualit%C3%A9-de-lair"></a>
</h3>
<p>L’indicateur <strong>A2</strong> évalue la qualité de l’air.
<em>Note: Utiliser <code><a href="../reference/indicator_air_quality.html">indicator_air_quality()</a></code> avec des données
ATMO ou sources de pollution pour un usage réel.</em></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulation d'indice qualité air</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">46</span><span class="op">)</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">A2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">55</span>, <span class="fl">95</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">A2</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   62.37   65.76   78.55   77.23   87.91   92.94</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="workflow-multi-familles-v0-3-0">Workflow Multi-Familles v0.3.0<a class="anchor" aria-label="anchor" href="#workflow-multi-familles-v0-3-0"></a>
</h2>
<div class="section level3">
<h3 id="normalisation-et-agrégation">Normalisation et agrégation<a class="anchor" aria-label="anchor" href="#normalisation-et-agr%C3%A9gation"></a>
</h3>
<p>Normalisons tous les indicateurs et créons les indices par
famille.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Normaliser tous les nouveaux indicateurs</span></span>
<span><span class="va">result_norm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/normalize_indicators.html">normalize_indicators</a></span><span class="op">(</span></span>
<span>  <span class="va">result</span>,</span>
<span>  indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B1"</span>, <span class="st">"B2"</span>, <span class="st">"B3"</span>, <span class="st">"R1"</span>, <span class="st">"R2"</span>, <span class="st">"R3"</span>, <span class="st">"T1"</span>, <span class="st">"T2"</span>, <span class="st">"A1"</span>, <span class="st">"A2"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"minmax"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Créer les indices composites par famille</span></span>
<span><span class="va">result_norm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_family_index.html">create_family_index</a></span><span class="op">(</span></span>
<span>  <span class="va">result_norm</span>,</span>
<span>  family_codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"R"</span>, <span class="st">"T"</span>, <span class="st">"A"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"mean"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Afficher les indices par famille</span></span>
<span><span class="va">result_norm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">parcel_id</span>, <span class="va">family_B</span>, <span class="va">family_R</span>, <span class="va">family_T</span>, <span class="va">family_A</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   parcel_id family_B family_R family_T family_A</span></span>
<span><span class="co">#&gt; 1       P01 39.80832 60.45303 61.29032 50.00000</span></span>
<span><span class="co">#&gt; 2       P02 68.82910 60.02550 17.62303 28.71851</span></span>
<span><span class="co">#&gt; 3       P03 49.84050 39.18232 44.71207 44.90653</span></span>
<span><span class="co">#&gt; 4       P04 29.08790 22.14935 62.47047 40.25588</span></span>
<span><span class="co">#&gt; 5       P05 24.27117 34.80352 11.29032 30.80376</span></span>
<span><span class="co">#&gt; 6       P06 55.55556 42.09048 41.69098 54.08198</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="agrégation-conservative-méthode-min">Agrégation conservative (méthode “min”)<a class="anchor" aria-label="anchor" href="#agr%C3%A9gation-conservative-m%C3%A9thode-min"></a>
</h3>
<p>Pour les risques, utilisons la méthode <strong>“min”</strong> (pire
cas) :</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Agrégation conservative pour la famille Risques</span></span>
<span><span class="va">result_risk_min</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_family_index.html">create_family_index</a></span><span class="op">(</span></span>
<span>  <span class="va">result_norm</span>,</span>
<span>  family_codes <span class="op">=</span> <span class="st">"R"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"min"</span>  <span class="co"># Score = pire indicateur</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Comparer méthodes "mean" vs "min"</span></span>
<span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="va">result_norm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">parcel_id</span>, <span class="va">R1_norm</span>, <span class="va">R2_norm</span>, <span class="va">R3_norm</span>, <span class="va">family_R</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    risk_min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="va">R1_norm</span>, <span class="va">R2_norm</span>, <span class="va">R3_norm</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparison</span></span>
<span><span class="co">#&gt;   parcel_id   R1_norm   R2_norm   R3_norm family_R  risk_min</span></span>
<span><span class="co">#&gt; 1       P01 28.205045  53.15405 100.00000 60.45303 28.205045</span></span>
<span><span class="co">#&gt; 2       P02 67.956914  21.54089  90.57869 60.02550 21.540886</span></span>
<span><span class="co">#&gt; 3       P03  1.120893 100.00000  16.42606 39.18232  1.120893</span></span>
<span><span class="co">#&gt; 4       P04 48.780961  17.66709   0.00000 22.14935  0.000000</span></span>
<span><span class="co">#&gt; 5       P05 12.187465  55.34306  36.88004 34.80352 12.187465</span></span>
<span><span class="co">#&gt; 6       P06 33.620254  77.29592  15.35528 42.09048 15.355282</span></span></code></pre></div>
<p><strong>Interprétation</strong> : La méthode “min” identifie le
facteur limitant (risque le plus élevé).</p>
</div>
</div>
<div class="section level2">
<h2 id="visualisation-radar-multi-axes">Visualisation Radar Multi-Axes<a class="anchor" aria-label="anchor" href="#visualisation-radar-multi-axes"></a>
</h2>
<div class="section level3">
<h3 id="radar-à-4-familles-nouvelles-v0-3-0">Radar à 4 familles (nouvelles v0.3.0)<a class="anchor" aria-label="anchor" href="#radar-%C3%A0-4-familles-nouvelles-v0-3-0"></a>
</h3>
<p>Visualisons le profil écosystémique d’une parcelle avec les 4
nouvelles familles :</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Radar pour une parcelle (4 nouvelles familles)</span></span>
<span><span class="fu"><a href="../reference/nemeton_radar.html">nemeton_radar</a></span><span class="op">(</span></span>
<span>  <span class="va">result_norm</span>,</span>
<span>  unit_id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"family"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Profil v0.3.0 - Parcelle 1 (nouvelles familles)"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="biodiversity-resilience-v030_fr_files/figure-html/unnamed-chunk-13-1.png" class="r-plt" alt="" width="672"></p>
</div>
<div class="section level3">
<h3 id="radar-complet-avec-toutes-les-familles-disponibles">Radar complet avec toutes les familles disponibles<a class="anchor" aria-label="anchor" href="#radar-complet-avec-toutes-les-familles-disponibles"></a>
</h3>
<p>Pour voir l’ensemble des services écosystémiques, ajoutons aussi les
familles v0.2.0 existantes :</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ajouter quelques indicateurs des familles existantes pour démonstration</span></span>
<span><span class="va">result_norm</span><span class="op">$</span><span class="va">C1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">40</span>, <span class="fl">90</span><span class="op">)</span>  <span class="co"># Carbon biomass</span></span>
<span><span class="va">result_norm</span><span class="op">$</span><span class="va">W1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span>, <span class="fl">80</span><span class="op">)</span>  <span class="co"># Water network</span></span>
<span><span class="va">result_norm</span><span class="op">$</span><span class="va">F1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span>, <span class="fl">85</span><span class="op">)</span>  <span class="co"># Soil fertility</span></span>
<span><span class="va">result_norm</span><span class="op">$</span><span class="va">L1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">75</span><span class="op">)</span>  <span class="co"># Landscape fragmentation</span></span>
<span></span>
<span><span class="co"># Normaliser</span></span>
<span><span class="va">result_norm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/normalize_indicators.html">normalize_indicators</a></span><span class="op">(</span></span>
<span>  <span class="va">result_norm</span>,</span>
<span>  indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"W1"</span>, <span class="st">"F1"</span>, <span class="st">"L1"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"minmax"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Créer indices familles existantes</span></span>
<span><span class="va">result_complete</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_family_index.html">create_family_index</a></span><span class="op">(</span></span>
<span>  <span class="va">result_norm</span>,</span>
<span>  family_codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C"</span>, <span class="st">"W"</span>, <span class="st">"F"</span>, <span class="st">"L"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"mean"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Radar complet : 8 familles</span></span>
<span><span class="fu"><a href="../reference/nemeton_radar.html">nemeton_radar</a></span><span class="op">(</span></span>
<span>  <span class="va">result_complete</span>,</span>
<span>  unit_id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"family"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Profil écosystémique complet - Parcelle 1 (8 familles)"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="biodiversity-resilience-v030_fr_files/figure-html/unnamed-chunk-15-1.png" class="r-plt" alt="" width="672"></p>
</div>
<div class="section level3">
<h3 id="comparaison-de-parcelles-nouveau-v0-3-0">Comparaison de parcelles (NOUVEAU v0.3.0)<a class="anchor" aria-label="anchor" href="#comparaison-de-parcelles-nouveau-v0-3-0"></a>
</h3>
<p>La v0.3.0 introduit le <strong>mode comparaison</strong> pour
visualiser plusieurs parcelles simultanément :</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Comparer 3 parcelles sur le même radar</span></span>
<span><span class="fu"><a href="../reference/nemeton_radar.html">nemeton_radar</a></span><span class="op">(</span></span>
<span>  <span class="va">result_complete</span>,</span>
<span>  unit_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"family"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Comparaison de 3 parcelles - 8 familles"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="biodiversity-resilience-v030_fr_files/figure-html/unnamed-chunk-16-1.png" class="r-plt" alt="" width="672"></p>
<p><strong>Utilisation</strong> : Identifiez rapidement les parcelles à
haute biodiversité (famille B) mais forte vulnérabilité (famille R).</p>
</div>
</div>
<div class="section level2">
<h2 id="analyses-thématiques">Analyses Thématiques<a class="anchor" aria-label="anchor" href="#analyses-th%C3%A9matiques"></a>
</h2>
<div class="section level3">
<h3 id="hotspots-biodiversité-ancienneté">Hotspots biodiversité + ancienneté<a class="anchor" aria-label="anchor" href="#hotspots-biodiversit%C3%A9-anciennet%C3%A9"></a>
</h3>
<p>Identifier les forêts anciennes à haute valeur écologique :</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hotspots_bio</span> <span class="op">&lt;-</span> <span class="va">result_complete</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">family_B</span> <span class="op">&gt;</span> <span class="fl">60</span>, <span class="va">T1</span> <span class="op">&gt;</span> <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">family_B</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Forêts anciennes à haute biodiversité :"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">hotspots_bio</span><span class="op">)</span>, <span class="st">"parcelles\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Forêts anciennes à haute biodiversité : 1 parcelles</span></span>
<span></span>
<span><span class="co"># Afficher les parcelles identifiées</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">hotspots_bio</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">hotspots_bio</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">parcel_id</span>, <span class="va">family_B</span>, <span class="va">T1</span>, <span class="va">family_R</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt;   parcel_id family_B  T1 family_R</span></span>
<span><span class="co">#&gt; 1       P07 90.94836 150 52.78104</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="parcelles-vulnérables-multi-risques">Parcelles vulnérables multi-risques<a class="anchor" aria-label="anchor" href="#parcelles-vuln%C3%A9rables-multi-risques"></a>
</h3>
<p>Détecter les parcelles cumulant plusieurs risques :</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multi_risques</span> <span class="op">&lt;-</span> <span class="va">result_complete</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    nb_risques <span class="op">=</span> <span class="op">(</span><span class="va">R1_norm</span> <span class="op">&gt;</span> <span class="fl">60</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">R2_norm</span> <span class="op">&gt;</span> <span class="fl">60</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">R3_norm</span> <span class="op">&gt;</span> <span class="fl">60</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">nb_risques</span> <span class="op">&gt;=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">nb_risques</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Parcelles à risques multiples (≥2) :"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">multi_risques</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Parcelles à risques multiples (≥2) : 1</span></span>
<span></span>
<span><span class="co"># Détail des risques</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">multi_risques</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">multi_risques</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">parcel_id</span>, <span class="va">R1_norm</span>, <span class="va">R2_norm</span>, <span class="va">R3_norm</span>, <span class="va">nb_risques</span>, <span class="va">family_R</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt;   parcel_id  R1_norm  R2_norm  R3_norm nb_risques family_R</span></span>
<span><span class="co">#&gt; 1       P02 67.95691 21.54089 90.57869          2  60.0255</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="services-climatiques-urbains">Services climatiques urbains<a class="anchor" aria-label="anchor" href="#services-climatiques-urbains"></a>
</h3>
<p>Évaluer le potentiel de régulation climatique :</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">services_climat</span> <span class="op">&lt;-</span> <span class="va">result_complete</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">A1</span> <span class="op">&gt;</span> <span class="fl">70</span>, <span class="va">A2</span> <span class="op">&gt;</span> <span class="fl">70</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">family_A</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Parcelles à fort potentiel climatique :"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">services_climat</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Parcelles à fort potentiel climatique : 1</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">services_climat</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">services_climat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">parcel_id</span>, <span class="va">A1</span>, <span class="va">A2</span>, <span class="va">family_A</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt;   parcel_id       A1       A2 family_A</span></span>
<span><span class="co">#&gt; 1       P08 70.51631 78.73541 70.51087</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="cartographie-multi-critères">Cartographie Multi-Critères<a class="anchor" aria-label="anchor" href="#cartographie-multi-crit%C3%A8res"></a>
</h2>
<p>Visualisons les indices composites pour les nouvelles familles :</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p_bio</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_indicators_map.html">plot_indicators_map</a></span><span class="op">(</span><span class="va">result_complete</span>, indicator <span class="op">=</span> <span class="st">"family_B"</span>,</span>
<span>                              palette <span class="op">=</span> <span class="st">"Greens"</span>, title <span class="op">=</span> <span class="st">"Biodiversité (B)"</span><span class="op">)</span></span>
<span><span class="va">p_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_indicators_map.html">plot_indicators_map</a></span><span class="op">(</span><span class="va">result_complete</span>, indicator <span class="op">=</span> <span class="st">"family_R"</span>,</span>
<span>                               palette <span class="op">=</span> <span class="st">"YlOrRd"</span>, title <span class="op">=</span> <span class="st">"Risques (R)"</span><span class="op">)</span></span>
<span><span class="va">p_temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_indicators_map.html">plot_indicators_map</a></span><span class="op">(</span><span class="va">result_complete</span>, indicator <span class="op">=</span> <span class="st">"T1"</span>,</span>
<span>                               palette <span class="op">=</span> <span class="st">"Blues"</span>, title <span class="op">=</span> <span class="st">"Ancienneté (T1)"</span><span class="op">)</span></span>
<span><span class="va">p_air</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_indicators_map.html">plot_indicators_map</a></span><span class="op">(</span><span class="va">result_complete</span>, indicator <span class="op">=</span> <span class="st">"family_A"</span>,</span>
<span>                              palette <span class="op">=</span> <span class="st">"viridis"</span>, title <span class="op">=</span> <span class="st">"Air &amp; Climat (A)"</span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="va">p_bio</span> <span class="op">+</span> <span class="va">p_risk</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">p_temp</span> <span class="op">+</span> <span class="va">p_air</span><span class="op">)</span></span></code></pre></div>
<p><img src="biodiversity-resilience-v030_fr_files/figure-html/unnamed-chunk-20-1.png" class="r-plt" alt="" width="672"></p>
</div>
<div class="section level2">
<h2 id="tableau-récapitulatif">Tableau récapitulatif<a class="anchor" aria-label="anchor" href="#tableau-r%C3%A9capitulatif"></a>
</h2>
<p>Vue d’ensemble des indicateurs calculés :</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Résumé des 10 nouveaux indicateurs v0.3.0</span></span>
<span><span class="va">summary_table</span> <span class="op">&lt;-</span> <span class="va">result_complete</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">parcel_id</span>,</span>
<span>         <span class="co"># Biodiversité</span></span>
<span>         <span class="va">B1</span>, <span class="va">B2</span>, <span class="va">B3</span>, <span class="va">family_B</span>,</span>
<span>         <span class="co"># Risques</span></span>
<span>         <span class="va">R1</span>, <span class="va">R2</span>, <span class="va">R3</span>, <span class="va">family_R</span>,</span>
<span>         <span class="co"># Temporel</span></span>
<span>         <span class="va">T1</span>, <span class="va">T2</span>, <span class="va">family_T</span>,</span>
<span>         <span class="co"># Air</span></span>
<span>         <span class="va">A1</span>, <span class="va">A2</span>, <span class="va">family_A</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">summary_table</span></span>
<span><span class="co">#&gt;   parcel_id       B1 B2       B3 family_B       R1       R2       R3 family_R</span></span>
<span><span class="co">#&gt; 1       P01  24.5782 85 1657.262 39.80832 44.25188 47.07114 73.04010 60.45303</span></span>
<span><span class="co">#&gt; 2       P02 100.0000 86 1327.328 68.82910 65.53830 30.47225 68.09509 60.02550</span></span>
<span><span class="co">#&gt; 3       P03   0.0000 87 1474.873 49.84050 29.74880 71.66821 29.17421 39.18232</span></span>
<span><span class="co">#&gt; 4       P04   0.0000 84 2048.908 29.08790 55.26992 28.43826 20.55258 22.14935</span></span>
<span><span class="co">#&gt; 5       P05   0.0000 85 1322.150 24.27117 35.67475 48.22051 39.90999 34.80352</span></span>
<span><span class="co">#&gt;    T1         T2 family_T       A1       A2 family_A</span></span>
<span><span class="co">#&gt; 1  80 18.5854441 61.29032 74.83550 62.37394 50.00000</span></span>
<span><span class="co">#&gt; 2  45  7.0717841 17.62303 57.46452 64.73451 28.71851</span></span>
<span><span class="co">#&gt; 3  80 12.6900074 44.71207 53.25070 78.35990 44.90653</span></span>
<span><span class="co">#&gt; 4 120 14.4165688 62.47047 60.81278 68.82518 40.25588</span></span>
<span><span class="co">#&gt; 5  80  0.8048135 11.29032 59.36794 64.32505 30.80376</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>La version <strong>0.3.0</strong> de nemeton apporte :</p>
<ul>
<li>✅ <strong>10 nouveaux indicateurs</strong> (B1-B3, R1-R3, T1-T2,
A1-A2)</li>
<li>✅ <strong>4 nouvelles familles</strong> (Biodiversité, Risques,
Temps, Air)</li>
<li>✅ <strong>8 familles sur 12</strong> maintenant implémentées (avec
données complètes)</li>
<li>✅ Méthode d’agrégation <strong>“min”</strong> pour analyses de
risque</li>
<li>✅ Mode <strong>comparaison</strong> pour radars
multi-parcelles</li>
<li>✅ <strong>845+ tests</strong> avec 87.35% de couverture</li>
</ul>
<p><strong>Prochaines étapes (v0.4.0)</strong> :</p>
<ul>
<li>Familles S (Social), P (Production), E (Énergie), N
(Naturalité)</li>
<li>Analyses d’incertitude Monte Carlo</li>
<li>Intégration avancée de données externes</li>
</ul>
<p><strong>Ressources</strong> :</p>
<ul>
<li>Vignette “Familles d’indicateurs” : référentiel complet des 12
familles</li>
<li>Vignette “Analyse temporelle” : workflows multi-périodes</li>
<li>Documentation API : <code><a href="../reference/indicator_biodiversity_protection.html">?indicator_biodiversity_protection</a></code>,
<code><a href="../reference/nemeton_radar.html">?nemeton_radar</a></code>, etc.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/pobsteta" class="external-link">Pascal Obstétar</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
